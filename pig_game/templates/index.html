<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ë°”ì¹´ë¼ ê²Œì„</title>
    <style>
        body { text-align: center; font-family: sans-serif; }
        .cards img { width: 100px; margin: 5px; }
        .winner { font-size: 24px; font-weight: bold; margin-top: 20px; }
        .topbar { margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="topbar">
        {% if user %}
            <p>ğŸ‘¤ ë¡œê·¸ì¸ ì¤‘: <strong>{{ user.username }}</strong></p>
            <p>ğŸ’° ë³´ìœ  ì¹©: <strong>{{ user.chips }}</strong></p>
            <form action="/logout" method="get" style="display: inline;">
                <button type="submit">ğŸšª ë¡œê·¸ì•„ì›ƒ</button>
            </form>
        {% else %}
            <a href="/login">ğŸ”‘ ë¡œê·¸ì¸</a> |
            <a href="/register">ğŸ“ íšŒì›ê°€ì…</a>
        {% endif %}
    </div>

    <h1>ğŸ– ë¼ì§€ ê²Œì„</h1>

    <form method="post" action="/game">
        <label>ë°°íŒ… ëŒ€ìƒ:</label>
        <select name="bet_target">
            <option value="player">Player</option>
            <option value="banker">Banker</option>
            <option value="tie">Tie</option>
        </select><br><br>

        <label>ë°°íŒ… ê¸ˆì•¡:</label>
        <input type="number" name="bet_amount" min="1" max="10000" required><br><br>

        <button type="submit">ê²Œì„ ì‹œì‘</button>
    </form>

    {% if result %}
        <h2>ğŸ‘¤ Player</h2>
        <div class="cards">
            {% for card in result.player.cards %}
                <img src="https://deckofcardsapi.com/static/img/{{ card }}.png">
            {% endfor %}
        </div>
        <p>ì ìˆ˜: {{ result.player.score }}</p>

        <h2>ğŸ¦ Banker</h2>
        <div class="cards">
            {% for card in result.banker.cards %}
                <img src="https://deckofcardsapi.com/static/img/{{ card }}.png">
            {% endfor %}
        </div>
        <p>ì ìˆ˜: {{ result.banker.score }}</p>

        <div class="winner">
            ğŸ† ê²°ê³¼: {{ result.winner | upper }} ìŠ¹!<br>
            {% if result.bet_win %}
                âœ… ë°°íŒ… ì„±ê³µ! +{{ result.bet_change }} ì¹©<br>
            {% else %}
                âŒ ë°°íŒ… ì‹¤íŒ¨... -{{ result.bet_change }} ì¹©<br>
            {% endif %}
            ğŸ’° í˜„ì¬ ì¹©: {{ result.final_chips }}
        </div>
    {% endif %}
</body>
</html>
